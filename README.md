# CommuBase - 軽量コミュニティ＆ナレッジ共有プラットフォーム

CommuBaseは、FlaskとSQLiteをベースにした、シンプルでセキュアなコミュニティ・ナレッジ共有・タスク管理のためのWebアプリケーションテンプレートです。

このWebアプリは、**OTP（ワンタイムパスワード）によるパスワードレスログイン**を採用しており、チーム内での情報共有やタスクの整理を簡単に行うための基盤として設計されています。

## 主な機能

1.  **パスワードレス認証:** メールアドレスとOTPによる簡単かつセキュアなログイン。
2.  **記事/ナレッジ共有:** Markdown対応の記事投稿、ファイル添付、いいね、コメント機能。
3.  **タスク/Todo管理:** 個人タスクとチーム共通タスクの管理。
4.  **Canva連携:** Canvaデザインを直接記事にアップロードする機能。
5.  **管理者機能:** ユーザーの追加と管理（初期設定は `setup.py` で定義）。
6.  **配布容易性:** `.env` と `config.json` を使用し、環境設定とサイト外観設定を分離。

## セットアップ方法

このプロジェクトは、対話形式の `setup.py` スクリプトを使用して環境設定を簡単に行えるように設計されています。

### 1\. 必要環境

  * Python 3.8+
  * pip

### 2\. 環境構築

以下の手順に従ってプロジェクトを準備してください。

```bash
# 1. リポジトリをクローン
git clone https://github.com/Yukkurim/community
cd community

# 2. 依存ライブラリのインストール
pip install -r requirements.txt
```

### 3\. 設定ファイルの生成（重要）

`setup.py` を実行すると、機密情報ファイル（`.env`）とサイト設定ファイル（`config.json`）が対話形式で自動生成されます。

```bash
python setup.py
```

実行中に以下の情報を入力するよう求められます。

| 設定項目 | 用途 | 備考 |
| :--- | :--- | :--- |
| **コミュニティ名** | `config.json` | サイトのタイトル、ヘッダーに表示されます。 |
| **テーマカラー** | `config.json` | メインのアクセントカラー（例: `#ffac30`）。 |
| **Secret Key** | `.env` | Flaskのセッション暗号化キー（自動生成）。 |
| **管理者メール** | `.env` | **最初の管理者ユーザー**となるメールアドレス。 |
| **メール設定 (SMTP)** | `.env` | OTPメール送信に必要なサーバー情報、ユーザー名、パスワード。 |
| **Canva連携ID** | `.env` | CanvaのAPI連携を行う場合のクライアントID/Secret。 |

### 4\. アプリケーションの起動

設定ファイル生成後、以下のコマンドでアプリケーションを起動し、データベースを初期化します。

```bash
python app.py
```

-----

## 開発環境の構造

| ファイル名 | 役割 | 備考 |
| :--- | :--- | :--- |
| `app.py` | メインアプリケーションファイル | **`.env` と `config.json` を読み込み**、動的に設定を適用。 |
| `setup.py` | セットアップスクリプト | 対話形式で `.env` と `config.json` を生成する。 |
| `config.json` | サイト設定ファイル | コミュニティ名、テーマカラーなど、機密ではない設定。 |
| `.env` | 環境変数ファイル | **SECRET\_KEY, DB\_URI, メールパスワード**などの機密情報。 |
| `requirements.txt` | 依存ライブラリ一覧 | `python-dotenv`, `Flask-Mail` など。 |
| `templates/base.html` | ベースHTML | `config.json` の設定（名前、色）を適用。 |
| `uploads/` | アップロードディレクトリ | 記事に添付されたファイルが保存される。 |

## ライセンス

このプロジェクトは、**MIT License** の下で公開されています。

あなたは、このソフトウェアを自由に利用、改変、再配布、商用利用することができます。詳細については [LICENSE](https://github.com/Yukkurim/community/LICENSE) を参照してください。
